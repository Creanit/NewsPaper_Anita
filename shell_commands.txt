# 0) –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

- python manage.py shell

from django.contrib.auth import get_user_model
from news.models import Author, Category, Post, Comment

User = get_user_model()


# 2) –°–æ–∑–¥–∞—é 2 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
u1 = User.objects.create_user(username="dance_editor", password="pass12345")
u2 = User.objects.create_user(username="dance_reporter", password="pass12345")


# 3) –°–æ–∑–¥–∞—é 2 –ê–≤—Ç–æ—Ä–∞
a1 = Author.objects.create(user=u1)
a2 = Author.objects.create(user=u2)


# 4) –î–æ–±–∞–≤–ª—è—é 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
c1 = Category.objects.create(category_name="–ë–∞–ª–µ—Ç")
c2 = Category.objects.create(category_name="–ö–æ–Ω—Ç–µ–º–ø–æ—Ä–∞—Ä–∏")
c3 = Category.objects.create(category_name="–•–∏–ø-—Ö–æ–ø")
c4 = Category.objects.create(category_name="–§–µ—Å—Ç–∏–≤–∞–ª–∏ –∏ —Å–æ–±—ã—Ç–∏—è")


# 5) –°–æ–∑–¥–∞—é 2 —Å—Ç–∞—Ç—å–∏ –∏ 1 –Ω–æ–≤–æ—Å—Ç—å
p1 = Post.objects.create(author=a1, post_type="BP", title="–ö–æ–Ω—Ç–µ–º–ø–æ—Ä–∞—Ä–∏: –∫–∞–∫ –Ω–∞—á–∞—Ç—å –∏ –Ω–µ –ø–µ—Ä–µ–≥–æ—Ä–µ—Ç—å", content="–ö–æ–Ω—Ç–µ–º–ø–æ—Ä–∞—Ä–∏ ‚Äî —ç—Ç–æ –ø—Ä–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –¥—ã—Ö–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ. –ù–∞—á–Ω–∏ —Å –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á: –≤–µ—Å —Ç–µ–ª–∞, –æ–ø–æ—Ä–∞, –º—è–≥–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –∏ —Ä–∞–±–æ—Ç–∞ —Å —Ü–µ–Ω—Ç—Ä–æ–º. –°—Ç–∞–≤—å —Ü–µ–ª—å –Ω–µ ¬´–≤—ã—É—á–∏—Ç—å —Å–≤—è–∑–∫—É¬ª, –∞ –ø–æ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø. –†–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –≥–µ—Ä–æ–∏–∑–º–∞: –ª—É—á—à–µ 30 –º–∏–Ω—É—Ç, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ.")
p2 = Post.objects.create(author=a2, post_type="BP", title="–ë–∞–ª–µ—Ç–Ω–∞—è –±–∞–∑–∞ –¥–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö: –º–∏—Ñ—ã –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å", content="–ë–∞–ª–µ—Ç ‚Äî —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ —à–ø–∞–≥–∞—Ç –∏ –ø—É–∞–Ω—Ç—ã, –∞ –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ –ø—Ä–æ –æ—Å–∞–Ω–∫—É, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å. –í–∑—Ä–æ—Å–ª—ã–º –≤–∞–∂–Ω–æ —É–∫—Ä–µ–ø–ª—è—Ç—å —Å—Ç–æ–ø—É –∏ –∫–æ—Ä–ø—É—Å, —É—á–∏—Ç—å—Å—è –¥–µ—Ä–∂–∞—Ç—å –±–∞–ª–∞–Ω—Å –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏. –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ: —Ç–µ—Ö–Ω–∏–∫–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ –≤—Å–µ–≥–¥–∞ –≤–∞–∂–Ω–µ–µ —Å–∫–æ—Ä–æ—Å—Ç–∏.")
p3 = Post.objects.create(author=a1, post_type="NL", title="–û—Ç–∫—Ä—ã—Ç—ã–π —É—Ä–æ–∫ –ø–æ —Ç–∞–Ω—Ü–∞–º –≤ —ç—Ç—É —Å—É–±–±–æ—Ç—É", content="–í —ç—Ç—É —Å—É–±–±–æ—Ç—É —Å–æ—Å—Ç–æ–∏—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–π —É—Ä–æ–∫: —Ä–∞–∑–º–∏–Ω–∫–∞, –∫–æ—Ä–æ—Ç–∫–∞—è —Å–≤—è–∑–∫–∞ –∏ –º–∏–Ω–∏-–∏–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏—è. –ü—Ä–∏—Ö–æ–¥–∏—Ç–µ –≤ —É–¥–æ–±–Ω–æ–π —Ñ–æ—Ä–º–µ, –±–µ—Ä–∏—Ç–µ –≤–æ–¥—É –∏ —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ!")


# 6) –ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
p1.post_categories.add(c2, c4)
p2.post_categories.add(c1)
p3.post_categories.add(c3, c4)


# 7) –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
com1 = Comment.objects.create(post=p1, user=u1, comment_text="–ö–ª–∞—Å—Å–Ω–∞—è —Å—Ç–∞—Ç—å—è! –û—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–æ —Ç–æ, —á—Ç–æ –Ω–µ –Ω–∞–¥–æ –≥–Ω–∞—Ç—å—Å—è –∑–∞ —Å–ª–æ–∂–Ω—ã–º–∏ —Å–≤—è–∑–∫–∞–º–∏.")
com2 = Comment.objects.create(post=p2, user=u2, comment_text="–°–æ–≥–ª–∞—Å–Ω–∞: —Ç–µ—Ö–Ω–∏–∫–∞ –≤–∞–∂–Ω–µ–µ ‚Äò–±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞‚Äô. –û—Ç–ª–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞!")
com3 = Comment.objects.create(post=p3, user=u1, comment_text="–û, —Å—É–ø–µ—Ä! –ê –±—É–¥–µ—Ç –ª–∏ –∑–∞–ø–∏—Å—å –∏–ª–∏ —ç—Ç–æ —Ç–æ–ª—å–∫–æ –æ—Ñ–ª–∞–π–Ω?")
com4 = Comment.objects.create(post=p1, user=u2, comment_text="–•–æ—á—É –±–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –Ω–∞ –æ–ø–æ—Ä—Éüôå")


# 8) –õ–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏ –¥–ª—è –ø–æ—Å—Ç–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
p1.like()
p1.like()
p2.dislike()
p2.dislike()
p3.like()
p3.dislike()

com1.like()
com2.like()
com2.dislike()
com3.like()
com4.dislike()


# 9) –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ê–≤—Ç–æ—Ä–æ–≤
a1.update_rating()
a2.update_rating()


# 10) –í—ã–≤–æ–¥ username –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ª—É—á—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
best_author = Author.objects.order_by("-author_rating").select_related("user").first()
best_author.user.username
best_author.author_rating


# 11) –í—ã–≤–æ–¥ –¥–∞—Ç—ã, username –∞–≤—Ç–æ—Ä–∞, —Ä–µ–π—Ç–∏–Ω–≥–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –ø—Ä–µ–≤—å—é –ª—É—á—à–µ–π —Å—Ç–∞—Ç—å–∏ (—Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—å–∏ BP)
best_post = Post.objects.filter(post_type="BP").order_by("-post_rating").select_related("author__user").first()
best_post.post_date
best_post.author.user.username
best_post.post_rating
best_post.title
best_post.preview()


# 12) –í—ã–≤–æ–¥ –≤—Å–µ—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –ª—É—á—à–µ–π —Å—Ç–∞—Ç—å–µ
comments = Comment.objects.filter(post=best_post).select_related("user").order_by("comment_date")
for c in comments: c.comment_date, c.user.username, c.comment_rating, c.comment_text